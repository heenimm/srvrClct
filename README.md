# Server Calculate

## Веб - сервис для вычисления арифметических выражений:

- [X] сложения;
- [X] вычитания;
- [X] деления;
- [X] умножения;

## API

Сервис имеет один хендлер POST-запрос на `/api/v1/calculate` с body(в формате JSON), содержащим выражение для вычисления. 

### Тело запроса:

```
{
  "expression": "2+2"
}
```


### Тело ответа:

Либо реузльтат:

```
{
"result": "6"
}
```

Либо ошибка:

```
{
"error":"Internal server error"
}
```



# Для запуска сервера необходимо:
----------------------------------------------------------

1. Клонировать репозиторий
   ---------------------------------------------

https://github.com/heenimm/srvrClct.git

### Установить зависимости:

```
go mod download
```


2. Запустить сервис
   -------------------------------

```
export PORT=8082 && go run ./cmd/main.go
```


////////////////////////////////////////////////////////////////////////////
ВАЖНО: После успешного запуска сервера надо открыть новый терминал и ввести следующие CURL, для проверки корректной работы
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------

4. CURL для отправления запросов если вы указали порт 8082:
   -----------------------------------------------------------------------------------------------

* #### 200 Success // успех

```
curl --location 'http://localhost:8082/api/v1/calculate' --header 'Content-Type: application/json' --data '{ "expression": "2+2*2" }'
```


* #### 422 Unprocessable Entity(корректный запрос с семантическими ошибками:

#### ввод символов или синтаксические ошибки) // когда введено некорректное выражение

```
curl --location 'http://localhost:8082/api/v1/calculate' --header 'Content-Type: application/json' --data '{ "expression": "2+2*abc" }'
```


* #### 500 Internal Server Error // когда введен текст

```
curl --location 'http://localhost:8082/api/v1/calculate' --header 'Content-Type: application/json' --data '{ "expression": "test" }'
```


| 200 Success  | 422 Unprocessable Entity            | 500 Internal Server Error         |
| ------------ | ----------------------------------- | --------------------------------- |
| "2+2*2"      | "2+2\*abc"                          | "force500"                        |
| {"result":6} | {"error":"Expression is not valid"} | {"error":"Internal server error"} |
